// https://leetcode.com/problems/maximum-absolute-sum-of-any-subarray/

pub struct Solution;

impl Solution {
    pub fn max_absolute_sum(nums: Vec<i32>) -> i32 {
        let mut max_sum = 0;
        let mut min_sum = 0;
        let mut sum = 0;
        for num in nums {
            sum += num;
            if sum > max_sum {
                max_sum = sum;
            }
            if sum < min_sum {
                min_sum = sum;
            }
        }
        (max_sum - min_sum).abs()
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    fn test(nums: &[i32], expected: i32) {
        assert_eq!(Solution::max_absolute_sum(nums.to_vec()), expected);
    }

    #[test]
    fn ex1() {
        test(&[1, -3, 2, 3, -4], 5)
    }

    #[test]
    fn ex2() {
        test(&[2, -5, 1, -4, 3, -2], 8)
    }

    #[test]
    fn discussion_case1() {
        test(&[100, -25, 5, -125], 145)
    }

    #[test]
    fn discussion_case2() {
        test(&[-1, -2, -3], 6)
    }

    #[test]
    fn leettest_case1() {
        // Ugh, may not like these randomly generated bs comments,
        // but at least it's a test case
        test(
            &[
                -352, 810, 478, -719, 702, -877, 10, -498, -120, -318, 636, 309, -718, 134, -55,
                455, 830, -884, -274, 351, -940, -322, -72, 558, -998, -859, 28, -579, -708, 151,
                150, -83, 429, 68, -710, 113, 478, -772, -362, -551, -435, 73, -608, 278, -673,
                724, 176, -649, 222, 171, 567, 914, -83, 403, 990, -138, 340, 232, 22, 875, 332,
                -629, 441, -991, -997, 49, -270, 703, -775, -174, 94, -285, 451, 768, -292, -609,
                486, -679, 721, -653, -190, 411, 881, -239, 187, 392, 70, 551, -932, 727, 245, 601,
                -99, -151, 156, 448, 52, -456, 297, 420,
            ],
            7382,
        )
    }

    #[test]
    fn leettest_case2() {
        test(
            &[
                266, 869, 558, -721, 389, 561, 240, 295, 938, -355, -713, 809, -877, -816, 681,
                565, 841, -632, -123, 429, -296, -612, -392, 860, 166, -346, 450, 690, -203, -619,
                196, -30, 174, -991, -242, -118, -137, -142, 966, -126, 439, 643, 474, -973, -751,
                679, 818, 736, 605, 89, 619, -709, -203, 132, -31, 950, 501, -109, -179, 382, -857,
                -49, 484, -153, 161, 822, 506, 1, 463, -924, 866, 302, -977, 45, -97, -179, 884,
                642, 187, 429, 161, -536, -30, -166, -301, 104, -975, -986, -645, -399, 207, -134,
                252, -262, -494, -620, -256, 13, 476, -879,
            ],
            9281,
        )
    }

    #[test]
    fn leettest_case3() {
        test(
            &[
                639, 528, 422, 4, -658, 760, -652, 529, -304, 27, -427, 65, -673, 195, 550, -6,
                138, -892, -935, -827, 857, 750, 430, -817, -870, 945, 680, 756, -680, 428, 149,
                -348, -960, 313, 185, 929, 426, -274, 848, 47, 595, 645, -579, 93, 751, 59, 117,
                -241, -88, 19, 781, 515, -377, 669, -997, -213, 636, -517, -394, -743, -632, -492,
                443, 643, -597, 412, 556, 694, 18, -32, 610, -260, 745, 542, -64, -556, 169, -418,
                -534, -197, 390, -75, 984, 577, 945, -167, 336, 971, -143, 30, 30, -811, -216, 603,
                -274, -427, -11, 12, 805, -238,
            ],
            9536,
        )
    }

    #[test]
    fn leettest_case4() {
        test(
            &[
                353, 133, -447, -73, -626, 136, -614, 215, 745, -481, -180, 807, 264, -306, 105,
                245, 681, -336, 16, -778, -208, 72, 187, -763, 11, -783, -523, -393, 360, -624,
                336, 93, 2, -603, 640, 226, -599, -364, -454, 160, 369, 867, 190, 167, 34, -482,
                582, -819, 310, -854, -12, 166, 862, 578, -879, 16, 528, -32, 651, 669, 55, 661,
                953, 146, 657, -430, -308, 209, -682, -761, 432, -575, -787, -570, 976, -954, -650,
                48, -771, -41, -588, 522, 177, -613, 377, -97, -536, 851, -12, 199, -668, -132,
                -95, 729, 489, -840, -186, -541, -944, 773,
            ],
            6772,
        )
    }

    #[test]
    fn leettest_case5() {
        test(
            &[
                -340, 725, -937, -84, -843, -636, -469, 442, -194, -327, 856, -465, 816, 7, -954,
                -240, -111, 840, 135, 123, 862, 768, -30, -932, 266, 594, 778, -302, -536, 943,
                -285, 584, -168, 467, 145, 607, -503, -816, 632, 876, -859, 396, 906, 377, 661,
                408, 590, 716, 396, 960, 371, 133, 47, -95, 906, -51, 603, -136, -675, 422, 642,
                -510, 934, -610, -749, 711, -220, 524, -754, -118, 89, -175, -751, 51, 552, -74,
                -978, -154, 203, -234, 845, 280, -995, 532, -960, -65, 754, 382, 165, -815, 16,
                136, 665, -595, 642, 853, 261, -189, 548, -615,
            ],
            12190,
        )
    }
}
